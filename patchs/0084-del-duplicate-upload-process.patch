From fe96bb446c827ea3df8a117f5e56ec29097b11b0 Mon Sep 17 00:00:00 2001
From: jnxyatmjx <jnxyatmjx@qq.com>
Date: Fri, 7 Apr 2023 10:07:39 +0800
Subject: [PATCH 84/85] del duplicate upload process

---
 .github/workflows/c-cpp.yml | 11 +++++------
 1 file changed, 5 insertions(+), 6 deletions(-)

diff --git a/.github/workflows/c-cpp.yml b/.github/workflows/c-cpp.yml
index 129d715..970fba6 100644
--- a/.github/workflows/c-cpp.yml
+++ b/.github/workflows/c-cpp.yml
@@ -56,12 +56,11 @@ jobs:
         #echo "::set-output name=stat::success" #command is deprecated 
         echo "stat=success" >> $GITHUB_OUTPUT
     
-    - name: upload bin files 
-      uses: actions/upload-artifact@v3
+    - name: tar files
       if: steps.compilexx.outputs.stat == 'success'
-      with:
-        name: ss-libev-bin
-        path: bld_/bin/
+      run: |
+        cd bld_
+        tar -cjvf shadowsocks.${{ matrix.os }}.tar.bz2 bld_/bin/*
         
         
     - name: ssh connection to actions
@@ -88,4 +87,4 @@ jobs:
       with:
         tag_name: ${{ steps.tag.outputs.release_tag }}
         body_path: release.txt
-        files: bld_/bin/*
+        files: bld_/shadowsocks.${{ matrix.os }}.tar.bz2
-- 
2.25.1

